{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <title>Login</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="{% static 'style.css' %}" />
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">

  </head>
  <body class="d-flex align-items-center justify-content-center min-vh-100">
    <section class="bg-image p-4 mx-auto" style="width: 500px;">
    {% if messages %}
      {% for message in messages %}
        {% if forloop.first %}
          <div class="alert alert-{{ message.tags }}" role="alert">{{ message }}</div>
        {% endif %}
      {% endfor %}
    {% endif %}

    {% if form.non_field_errors %}
      <div class="alert alert-danger">
        {% for err in form.non_field_errors %}
          {{ err }}{% if not forloop.last %}<br>{% endif %}
        {% endfor %}
      </div>
    {% endif %}
    <h2 class="text-center" style="font-weight: 600;">Login</h2>

    <form method="post">
      {% csrf_token %}

      <div class="mb-3">
        <label for="{{ form.email.id_for_label }}" class="form-label fw-semibold"
          >Email</label
        >
        {{ form.email }} {% if form.email.errors %}
        <div class="text-danger">
          {% for e in form.email.errors %}{{ e }}{% if not forloop.last %}<br>{% endif %}{% endfor %}
        </div>
        {% endif %}
      </div>

      <div class="mb-3">
        <label for="{{ form.password.id_for_label }}" class="form-label fw-semibold"
          >Password</label
        >
        {{ form.password }} {% if form.password.errors %}
        <div class="text-danger">
          {% for e in form.password.errors %}{{ e }}{% if not forloop.last %}<br>{% endif %}{% endfor %}
        </div>
        {% endif %}
      </div>

      <div class="d-grid gap-2">
        <button type="submit" class="btn btn-primary btn-custom fw-semibold"><i class="bi bi-box-arrow-in-right me-2"></i>Login</button>
      </div>
      <div class="text-center mt-3 regis">
        <a href="{% url 'accounts:register' %}" class="btn btn-link">Belum punya akun? Daftar</a>
      </div>
    </form>
  </section>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const hideAfter = 5000;
        const elements = document.querySelectorAll('.alert, .text-danger');
        if (elements.length === 0) return;
        setTimeout(() => {
          elements.forEach(el => {
            el.style.transition = 'opacity 0.6s ease';
            el.style.opacity = '0';
            setTimeout(() => {
              if (el.parentNode) el.parentNode.removeChild(el);
            }, 700);
          });
        }, hideAfter);
      });
    </script>
  </body>
</html>
